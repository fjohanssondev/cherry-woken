---
import { getCollection } from "astro:content";
import { Container } from "@/components/ui/container";
import { MenuApp } from "@/components/MenuApp";
import LikedDishes from "@/components/LikedDishes.astro";
import RootLayout from "@/layouts/RootLayout.astro";
import { OpeningHours } from "@/components/OpeningHours";
import { ImportantInformation } from "@/components/ImportantInformation";

const sections = await getCollection("menu");
const menu = sections.map((section) => ({
  title: section.data.title,
  id: section.data.id,
  order: section.data.order,
}));
---

<RootLayout>
  <Container className="flex flex-col md:flex-row">
    <main class="flex flex-col flex-1 order-2 md:order-1">
      <nav>
        <ul class="flex flex-wrap gap-x-2 gap-y-6">
          {
            menu
              .sort((a, b) => a.order - b.order)
              .map(({ id, title }) => (
                <li>
                  <a
                    class="bg-neutral-50 border border-neutral-300 hover:border-neutral-500 px-4 py-2"
                    href={`#${id}`}
                  >
                    {title}
                  </a>
                </li>
              ))
          }
        </ul>
      </nav>
      <section class="mt-12">
        <div class="flex flex-col space-y-4">
          <!-- <ImportantInformation client:load /> -->
          <div class="inline-flex">
            <OpeningHours client:load />
          </div>
          <div class="flex flex-col">
            <p>Dagens lunch: m책ndag-fredag 11.00 - 14.00</p>
            <div class="mt-2">
              <p>V채lj bland alla varmr채tter i menyn</p>
              <p>Dryck ing책r</p>
            </div>
          </div>
        </div>
      </section>
      <section class="mt-2">
        <MenuApp client:load menu={sections} />
      </section>
    </main>
    <LikedDishes />
  </Container>
</RootLayout>
